# Plugin Factory

## Описание
**Plugin Factory** — это расширяемый Python‑фреймворк для создания, загрузки и управления жизненным циклом плагинов. Проект предназначен для построения модульных приложений, где бизнес‑функциональность подключается и управляется динамически через единый контракт.

Ключевые цели проекта:
- строгий контракт плагина;
- предсказуемый жизненный цикл (state machine);
- удобный runtime API и CLI;

## Требования

Python 3.11+

Без внешних зависимостей (на текущем этапе)

## Статус проекта ⚠️⚠️⚠️
***MVP***, в целом всё работает но нужно учесть несколько нюансов см.TODO

⚠️example_main.py - временный файл, используется только для локального тестирования.

⚠️Каталог plugins/ содержит тестовые плагины, включая намеренно некорректные.

⚠️Контракт плагина будет расширен с доработкой State Machine

⚠️В State Machine не до конца реализованы переходы между состояниями

⚠️В api, Lifecycle и PluginManager разделены (временно)

⚠️Не приступал к отдельным тесам

⚠️CreatorCollectionPlugin - класс для PluginLoader на подумать (пока не несет смысла)

⚠️Отсутствует выгрузка плагинов не прошедших валидацию (ModuleUnloader)

## Ключевые возможности

- **Плагинная архитектура** с явным контрактом
- **State Machine** для управления жизненным циклом плагинов
- **Factory‑подход** для регистрации и инициализации плагинов
- **Runtime API** для программного управления

## Структура проекта

```
plugin-factory/
├── docs/
│   └── plugin_contract.md      # Описание контракта плагина
├── example/
│   ├── example_main.py         # Пример использования
│   └── plugins/                # Примеры плагинов
├── src/
│   └── plugin_factory/
│       ├── contracts/          # Контракты и интерфейсы
│       ├── core/               # Базовая логика фабрики
│       ├── infrastructure/     # State machine и инфраструктура
│       ├── logger/             # Единый логгер
│       └── runtime/            # Runtime API и CLI
├── tests/                      # Тесты
├── pyproject.toml              # Конфигурация проекта
└── README.md
```

## Контракт плагина

Каждый плагин обязан реализовывать единый контракт. Подробное описание см. в:

```
docs/plugin_contract.md - поака не готово
```
Контракт определяет:
- обязательные методы плагина;
- допустимые состояния;
- правила инициализации и завершения;
- взаимодействие с runtime.

Это обеспечивает совместимость всех плагинов и возможность их безопасного управления.

## Жизненный цикл плагина

Управление состояниями реализовано через state machine. Подробное описание см. в:

```
docs/lifecycle.md - поака не готово
```

Переходы между состояниями описаны явно и валидируются. Это исключает некорректные сценарии использования плагинов.

## Примеры использования

Быстрый старт и т.п. Подробное описание см. в:

```
docs/examples.md - поака не готово
```

## Планы развития
Основное:
- Доработать lifecycle (state-machine)
- Доработать контракты
- Доработать manager (api)
- Добавить выгрузку плагинов не прошедших валидацию

Вторичное:
- Добавить централизованное логирование
- Добавить тесты
- Добавить docstring
- Добавить документацию

На будущие:
- Добавить полноценную выгрузку плагинов и очистку ресурсов****
- Расширить источники загрузки плагинов:
  - Добавить загрузку/выгрузку плагинов на "горячую"
  - Добавить поддержка плагинов из формата json/yaml
- async плагины
- callback плагины
- CLI-инструменты
